# 테스트 가이드

## 개요
메모장 애플리케이션의 테스트 코드는 Django 테스트 프레임워크를 사용하여 작성되었습니다. 모든 주요 기능이 올바르게 동작하는지 확인하기 위한 포괄적인 테스트 스위트를 제공합니다.

## 테스트 구조

### 1. 모델 테스트 (`TestMemoModel`)
- **메모 생성 테스트**: 메모 객체가 올바르게 생성되는지 확인
- **문자열 표현 테스트**: `__str__` 메서드가 올바르게 동작하는지 확인
- **사용자 관계 테스트**: 메모와 사용자 간의 관계가 올바르게 설정되는지 확인

### 2. 폼 테스트
#### 회원가입 폼 테스트 (`TestSignUpForm`)
- **유효한 폼 데이터 테스트**: 올바른 데이터로 폼이 유효한지 확인
- **비밀번호 불일치 테스트**: 비밀번호가 일치하지 않을 때 폼이 무효한지 확인
- **이메일 누락 테스트**: 필수 이메일 필드가 누락되었을 때 폼이 무효한지 확인

#### 메모 폼 테스트 (`TestMemoForm`)
- **유효한 메모 폼 테스트**: 올바른 데이터로 폼이 유효한지 확인
- **제목 누락 테스트**: 제목이 없을 때 폼이 무효한지 확인
- **내용 누락 테스트**: 내용이 없을 때 폼이 무효한지 확인

### 3. 인증 뷰 테스트 (`TestAuthViews`)
- **회원가입 GET 요청**: 회원가입 페이지가 올바르게 렌더링되는지 확인
- **유효한 회원가입**: 올바른 데이터로 회원가입이 성공하는지 확인
- **무효한 회원가입**: 잘못된 데이터로 회원가입이 실패하는지 확인
- **유효한 로그인**: 올바른 자격증명으로 로그인이 성공하는지 확인
- **무효한 로그인**: 잘못된 자격증명으로 로그인이 실패하는지 확인

### 4. 메모 뷰 테스트 (`TestMemoViews`)
- **인증 요구사항**: 로그인하지 않은 사용자가 메모 기능에 접근할 수 없는지 확인
- **메모 목록**: 로그인한 사용자가 자신의 메모만 볼 수 있는지 확인
- **메모 상세**: 메모 상세 페이지가 올바르게 동작하는지 확인
- **메모 생성**: 새 메모 생성이 올바르게 동작하는지 확인
- **메모 수정**: 기존 메모 수정이 올바르게 동작하는지 확인
- **메모 삭제**: 메모 삭제가 올바르게 동작하는지 확인
- **사용자 격리**: 다른 사용자의 메모에 접근할 수 없는지 확인

### 5. URL 패턴 테스트 (`TestUrlPatterns`)
- 모든 URL 패턴이 올바르게 설정되어 있는지 확인
- URL 역참조가 예상된 경로를 반환하는지 확인

### 6. 통합 워크플로우 테스트 (`TestIntegrationWorkflows`)
- **완전한 메모 워크플로우**: 메모 생성 → 조회 → 수정 → 삭제의 전체 과정 테스트
- **사용자 격리 워크플로우**: 여러 사용자 간 데이터 격리가 올바르게 동작하는지 테스트

## 테스트 실행 방법

### 1. 기본 테스트 실행
```bash
python manage.py test memos.tests
```

### 2. 상세 출력으로 테스트 실행
```bash
python manage.py test memos.tests -v 2
```

### 3. 커스텀 테스트 러너 사용
```bash
python run_tests.py
```

### 4. 특정 테스트 클래스만 실행
```bash
python manage.py test memos.tests.TestMemoModel
```

### 5. 특정 테스트 메서드만 실행
```bash
python manage.py test memos.tests.TestMemoModel.test_memo_creation
```

## 코드 커버리지 확인

### 1. 커버리지 설치
```bash
pip install coverage
```

### 2. 커버리지 측정
```bash
coverage run --source='.' manage.py test memos.tests
```

### 3. 커버리지 리포트 확인
```bash
coverage report --include="memos/*" --omit="*/migrations/*,*/tests.py"
```

### 4. HTML 커버리지 리포트 생성
```bash
coverage html --include="memos/*" --omit="*/migrations/*,*/tests.py"
```

## 테스트 설계 원칙

### 1. **독립성**
- 각 테스트는 다른 테스트에 의존하지 않고 독립적으로 실행됩니다.
- `setUp()` 메서드를 사용하여 각 테스트마다 필요한 데이터를 초기화합니다.

### 2. **포괄성**
- 모든 주요 기능에 대한 테스트를 포함합니다.
- 정상 케이스뿐만 아니라 예외 상황도 테스트합니다.

### 3. **명확한 테스트 이름**
- 테스트 메서드 이름에 한글 독스트링을 사용하여 테스트 목적을 명확하게 표현합니다.
- `test_` 접두사를 사용하여 Django가 테스트 메서드를 인식할 수 있도록 합니다.

### 4. **적절한 어설션**
- `assertEqual`, `assertTrue`, `assertFalse`, `assertContains` 등 적절한 어설션 메서드를 사용합니다.
- 테스트 실패 시 유용한 정보를 제공할 수 있는 어설션을 선택합니다.

### 5. **테스트 데이터 관리**
- 테스트 데이터는 테스트 메서드 내에서 생성하거나 `setUp` 메서드에서 초기화합니다.
- 실제 프로덕션 데이터에 의존하지 않습니다.

## 테스트 결과

현재 테스트 스위트는 **36개의 테스트**를 포함하며, **100% 코드 커버리지**를 달성했습니다.

- **모델 테스트**: 3개
- **폼 테스트**: 5개 (회원가입 3개 + 메모 2개)
- **인증 뷰 테스트**: 5개
- **메모 뷰 테스트**: 15개
- **URL 테스트**: 6개
- **통합 테스트**: 2개

모든 테스트는 성공적으로 통과하며, 애플리케이션의 모든 주요 기능이 올바르게 동작함을 확인했습니다.

## 새로운 기능 추가 시 테스트 가이드

새로운 기능을 추가할 때는 다음 단계를 따르세요:

1. **모델 변경**: 새로운 모델이나 필드를 추가한 경우 모델 테스트 추가
2. **폼 변경**: 새로운 폼이나 유효성 검사를 추가한 경우 폼 테스트 추가
3. **뷰 변경**: 새로운 뷰나 기존 뷰의 로직을 변경한 경우 뷰 테스트 추가
4. **URL 변경**: 새로운 URL 패턴을 추가한 경우 URL 테스트 추가
5. **통합 테스트**: 여러 컴포넌트가 함께 동작하는 새로운 워크플로우 테스트 추가

모든 새로운 테스트는 기존 테스트 스타일과 일관성을 유지해야 합니다.